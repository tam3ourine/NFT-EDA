---
title: "NFT EDA"
author: "Tam Trinh"
date: '2022-05-06'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Import libraries
```{r}
library(tidyverse)
library(dplyr)
library(ggplot2)

```

Load dataset
```{r}

punk1 <- read.csv('punk_attribute_data/0-999.csv')
punk2 <- read.csv('punk_attribute_data/1000-1999.csv')
punk3 <- read.csv('punk_attribute_data/2000-2999.csv')
punk4 <- read.csv('punk_attribute_data/3000-3999.csv')
punk5 <- read.csv('punk_attribute_data/4000-4999.csv')
punk6 <- read.csv('punk_attribute_data/5000-5999.csv')
punk7 <- read.csv('punk_attribute_data/6000-6999.csv')
punk8 <- read.csv('punk_attribute_data/7000-7999.csv')
punk9 <- read.csv('punk_attribute_data/8000-8999.csv')
punk10 <- read.csv('punk_attribute_data/9000-9999.csv')

```

Combine dataframes into one
```{r}
AllPunk <- rbind(punk1, punk2, punk3, punk4, punk5, punk6, punk7, punk8, punk9, punk10)

```

Create df with attributes and load data
```{r}
attr <- read.csv('punk_attribute_data/CryptoPunks Attributes - Accessories Type.csv', header=T, na.strings=c("","NA"))

```


```{r}
class(AllPunk$accessories)
```
```{r}
punktest <- AllPunk[1:10, ]
```


Write function for finding attribute from string
```{r}

attr_func <- function(attr.col, target.string) {
  for (a in attr.col) {
    if (is.na(a) == FALSE) {
      if (grepl(a, target.string) == TRUE) {
        return(a)
      }
    }
}
}


attr_test <- attr_func(attr$Hair, punktest$accessories[1])

```


```{r}

paste(target, "test")
test_func <- function(i) {
  return(paste(i, "test"))
}

test_func(punktest$accessories[1])

sapply(col, func)

punktest$test4 <- sapply(punktest$accessories, test_func)
punktest$Hair <- sapply(punktest$accessories, attrHair_func)

```


```{r}

attrHair_func <- function(target.string) {
  for (a in attr$Hair) {
    if (is.na(a) == FALSE) {
      if (grepl(a, target.string) == TRUE) {
        return(a)
      }
    }
}
}


attrHair_func(punktest$accessories[1])
```















